<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0) on Tue Mar 06 05:49:42 MST 2012 -->
<title>Regulator (tahoe 1.3 API)</title>
<meta name="date" content="2012-03-06">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Regulator (tahoe 1.3 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/pb/sawdust/util/concurrent/LongCountDownLatch.html" title="class in com.pb.sawdust.util.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.Availability.html" title="enum in com.pb.sawdust.util.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/pb/sawdust/util/concurrent/Regulator.html" target="_top">Frames</a></li>
<li><a href="Regulator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.pb.sawdust.util.concurrent</div>
<h2 title="Class Regulator" class="title">Class Regulator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.pb.sawdust.util.concurrent.Regulator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@ThreadSafe
public class <span class="strong">Regulator</span>
extends java.lang.Object</pre>
<div class="block">The <code>Regulator</code> class is used to restrict access to a fixed, quantifiable resource.  A regulator is instantiated
 with some (<code>long</code>) value for its capacity, and then those entities wishing to use the resource can request
 a certain amount of that resource to use.  As long as the resource amount requested does not exceed the total capacity
 of the regulator (in which case an exception is thrown), a <code>Semaphore</code> representing that resource amount is
 returned to the requestor. This semaphore will block (via its <code>acquire</code> methods) until the resource has space
 for the request.  An "acquired" semaphore holds its space on the resource until its <code>release()</code> method is called.
 <p>
 A regulator can be set to "fair" or "unfair" mode; its default is "unfair."  Fair mode will treat each resource request
 as a FIFO queue, and will always wait until the first (head) request is granted before any others. In unfair mode, though
 the head request gets priority, if there is not space for it, but there is for a later request, the later request will
 be granted ahead of it.  Depending on the situation, this can prevent (even perpetually) larger requests from being
 granted, so care must be taken when working in unfair mode.
 <p>
 A regulator does not check to verify that a request <code>Semaphore</code> has been acquired, so once it has made resource
 space available to the requestor, it does not free that space until the semaphore has been released. Thus, as with other
 tasks which acquire resources (such as database connections), it is important that the end user use appropriate code
 to ensure that resources are not lost because they are never released. As an example, a standard idiom for a regulator
 request would like the following:
 <p>
 <pre><code>
     Regulator r;
     ...
     Semaphore request;
     try {
         request = r.request(100);
         request.acquireUninterruptibly();
         ...
     } finally {
         request.release();
     }
 </code></pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.Availability.html" title="enum in com.pb.sawdust.util.concurrent">Regulator.Availability</a></strong></code>
<div class="block">The <code>Availability</code> enum represents the three availability states for a given resource request on a <code>Regulator</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.html#Regulator(long)">Regulator</a></strong>(long&nbsp;capacity)</code>
<div class="block">Convenience constructor for a regulator with an unfair request policy,specifying the its capacity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.html#Regulator(long, boolean)">Regulator</a></strong>(long&nbsp;capacity,
         boolean&nbsp;fair)</code>
<div class="block">Constructor specifying the capacity of the regulator, and its fairness policy.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.Availability.html" title="enum in com.pb.sawdust.util.concurrent">Regulator.Availability</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.html#checkQuantity(long)">checkQuantity</a></strong>(long&nbsp;quantity)</code>
<div class="block">Determine the availability of a given resource request on this regulator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.html#getCapacity()">getCapacity</a></strong>()</code>
<div class="block">Get the capacity of this regulator.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.html#getCurrentAvailability()">getCurrentAvailability</a></strong>()</code>
<div class="block">Get the amount of available resource on this regulator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.concurrent.Semaphore</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.html#request(long)">request</a></strong>(long&nbsp;quantity)</code>
<div class="block">Request a quantity of resource from this regulator.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Regulator(long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Regulator</h4>
<pre>public&nbsp;Regulator(long&nbsp;capacity,
         boolean&nbsp;fair)</pre>
<div class="block">Constructor specifying the capacity of the regulator, and its fairness policy.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>capacity</code> - The capacity of the regulator.</dd><dd><code>fair</code> - If <code>true</code>, a "fair" policy for requests will be used by this regulator, otherwise an "unfair" policy
        will be used.</dd></dl>
</li>
</ul>
<a name="Regulator(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Regulator</h4>
<pre>public&nbsp;Regulator(long&nbsp;capacity)</pre>
<div class="block">Convenience constructor for a regulator with an unfair request policy,specifying the its capacity.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>capacity</code> - The capacity of the regulator.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getCapacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacity</h4>
<pre>public&nbsp;long&nbsp;getCapacity()</pre>
<div class="block">Get the capacity of this regulator.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>this regulator's capacity.</dd></dl>
</li>
</ul>
<a name="getCurrentAvailability()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentAvailability</h4>
<pre>public&nbsp;long&nbsp;getCurrentAvailability()</pre>
<div class="block">Get the amount of available resource on this regulator.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the amount of free resource available from this regulator.</dd></dl>
</li>
</ul>
<a name="checkQuantity(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkQuantity</h4>
<pre>public&nbsp;<a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.Availability.html" title="enum in com.pb.sawdust.util.concurrent">Regulator.Availability</a>&nbsp;checkQuantity(long&nbsp;quantity)</pre>
<div class="block">Determine the availability of a given resource request on this regulator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>quantity</code> - The amount of resource requested.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the avaialability of the resource request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if <code>quantity</code> is negative.</dd></dl>
</li>
</ul>
<a name="request(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>request</h4>
<pre>public&nbsp;java.util.concurrent.Semaphore&nbsp;request(long&nbsp;quantity)</pre>
<div class="block">Request a quantity of resource from this regulator. The resource space is available and held by this request from
 the time when the returned semaphore is acquired until it is released.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>quantity</code> - The amount of resource requested.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a semaphore representing the resource request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if <code>quantity</code> is negative, or if <code>quantity</code> exceeds this regulator's
                                  capacity.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/pb/sawdust/util/concurrent/LongCountDownLatch.html" title="class in com.pb.sawdust.util.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../com/pb/sawdust/util/concurrent/Regulator.Availability.html" title="enum in com.pb.sawdust.util.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/pb/sawdust/util/concurrent/Regulator.html" target="_top">Frames</a></li>
<li><a href="Regulator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
