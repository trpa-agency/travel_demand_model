---
title: "Resident Model"
output: html_document
---


#  Tahoe Resident Model Structure

The resident model is actually a series of models that attempt to capture multiple aspects of household, person and tour level travel making decisions. When applied these components essentially take the place of trip generation, trip distribution and model split that are the more familiar steps from the aggregate 4-step model. However because this is an activity-based model, the components cannot be grouped the same way since "trip generation" is done on a person-by-person basis with "trip distribution" and "modal split" integrated along the way. 

Instead of calculating a matrix of home-based work or home-based other trips based on generalized household trip rates, each person in the model area gets to explicitly choose whether to leave the house on the model day and if so whether to go to work and/or school (mandatory tours) or do some other kind of non-mandatory travel (joint and/or individual non-mandatory tours). If work/school travel is chosen, the person then decides where to go to work (Destination choice), when to go to work, how long to stay and when to return home (Time-of-day choice) and how to get to and from work (Mode choice). At the end of the daily activity pattern and mandatory DTM components, trip generation, distribution and modal split for home-based work trips has been done. 

With the knowledge of everyone in the households' schedule, it can now be determined if there is an opportunity for anyone in the household to take a tour together â€“ perhaps to shop or eat dinner (joint tour frequency). If there are several people at home at the same time, it is determined who will make up the tour party (kids and adults, just adults) and who will ultimately participate in the joint tour (joint tour composition and tour participation). Finally for each joint tour, the destination, time of day and mode choice is chosen. The set of joint-tour components generates home-based other trips that are behaviourally consistent with observed data. 

Each time a person makes a choice regarding when to leave, how long to stay and when to return, her daily schedule is updated to reflect the decision. However as in all households no matter how busy everyone is, someone still has to find time to go to the grocery store or the post office or take themselves to the doctor. These decisions are made in the individual non-mandatory tours model. First, it is determined whether the household needs someone to run the household errands on the model day and how many errands there are (maintenance frequency). If so, schedules are checked and the person most available is most likely chosen to run the errand/s (maintenance allocation). Next each person in the household decides to make or not make "discretionary tours" doctor visit, seeing friends, etc (discretionary frequency). In addition, persons at work choose whether to leave work during the day to eat or shop before returning to work to finish up their day (at-work frequency). As before, the destination, time of day and mode for any tours that were chosen most now be 
decided (non-mandatory DTM and at-work DTM). 

The final set of models (stop frequency, stop location and stop mode) determines whether stops are made along the way, where they are made and how they are made for each of the main tour types chosen above (mandatory, joint, non-mandatory and at-work). These stops make up what is thought of as the non-home-basedâ€ other trips in the four step process. The benefit of the activity-based models is that so much is known about the travel that occurs immediately before this non-home-based trip and after, that a much more reliable trip matrix can be produced. 

### Model Flow
```{r,echo=F,,out.height=1000}
library(DiagrammeR)
mermaid('
graph TD
A[Daily Activity Pattern Model]-->B[Mandatory]
A-->C[Non-mandatory]
A-->D[At-Home]
B-->E[Primary Destination]
E-->F[Mode Choice]
F-->G[Joint Tour Generation and Participation]
G-->H[Joint Tour - Destination, TOD, Mode]
H-->I[Maintenance Tour frequency and allocation]
I-->J[Discretionary and At-work tour frequency]
J-->K[Maintenance/Discretionary Tour - Destination, TOD, Mode ]
K-->L[Stop Generation, Destination, TOD, Mode]
')
```


```{r,echo=F,,out.height=200}
library(DiagrammeR)
mermaid('
graph LR;
        A-->B;
        B-->C;
        click A "#LongTermModels" "#LongTermModels"
        click B "#MandModels" "#MandModels"
        click C "#StopModels" "#StopModels"
')
```


# Population Synthesis and Auto Ownership {#LongTermModels}

The population synthesis procedure is designed to create a list of households in each TAZ with all necessary de-
tails regarding the household and person variables used in the travel models and according to specific zonal char-
acteristics; namely, average number of workers in a household per zone, average household size and number of 
households per income group. 

The number of autos available to a household is an important variable for explaining household travel behavior. 
It is included in such subsequent models as tour generation, mode choice, destination choice, and stop 
frequency/location choice. In the current model system developed for TRPA, auto ownership is considered a 
household-attribute variable (as in the most conventional models); thus, the auto-ownership choice model 
employs only household and zonal characteristics and is applied before any travel-related model.


# Daily Activity Pattern {#DAPModels}

A person's daily activity pattern (DAP) is classified by three main categories: 
* Mandatory pattern that includes at least one of the two mandatory activities - work or school. This 
constitutes either a workday or school day, and may include additional non-mandatory activities such as 
separate home-based tours or intermediate stops on the mandatory tours. 
* Non-mandatory pattern that includes only maintenance and discretionary tours. By virtue of the tour 
primary purpose definition, maintenance and discretionary tours cannot include travel for mandatory 
activities. 
* At-home pattern that includes only in-home activities. It should be noted that for simplicity, cases with 
complete absence from town (business travel) were combined with this category. 


# Mandatory Tour Models {#MandModels}

If a person in a household chooses a daily activity pattern with a work or school component, then that person is 
said to be making a 'mandatory tour.' The mandatory tour destination, time-of-day, and mode choice model 
(DTM) determines where that tour will go (the destination), when the tour will happen (the time-of-day), and 
what mode the person will use to travel during the tour (car, bus, etc). If the daily activity pattern chosen by the 
individual includes both school and work, then the school tour is processed first, followed by the work tour. 

# Joint Tour Models {#JTModels}

The joint travel types modeled explicitly in the current system are limited to fully joint tours generated by shared 
non-mandatory activity of several household members. One of the difficulties in modeling joint travel is that it is 
necessary not only to predict a number of joint tours, but also link them to the appropriate household members 
and ensure generation and scheduling consistency between the joint and individual tours of each household 
member. It is implemented by means of a sequence of 3 choice sub-models (see Figure 7.1): 
* Frequency choice: returns a number of joint tours generated by a household, 
* Travel party composition: person categories participating in each tour (adults, children, mixed), 
* Person participation in each tour for each of the household members (yes or no). 

If a household chooses to make a joint tour, the joint tour destination, time-of-day, and mode choice model 
(DTM) determines where that tour will go (the destination), when the tour will happen (the time-of-day), and 
how the tour participants will travel during the tour (the mode). When the model is applied, each tour party 
making a joint tour is treated as a separate and independent decision making unit. 

# Individual non-mandatory tour models {#INMModels}

The individual tour generation model for non-mandatory activity includes 4 choice sub-models applied successively 
- see Figure 9.1 below: 
ƒ Model for individual tours for household maintenance (i.e. grocery shopping, mail pick-up) activities 
allocated to the household members. Though these tours are implemented individually, the basic need for 
this activity relates to the entire household. This model is in subdivided into two successively applied sub-
models: 
- Household tour frequency choice sub-model for maintenance activities implemented individually 
- Model for allocation of maintenance tours to a household member 
ƒ Sub-model for individual tours for personal discretionary (i.e. going to the movies, taking a drive) activities; 
it is assumed that these activities are generated and scheduled at the person level without significant 
interaction among household members (recall that joint tours generated by shared discretionary activity of 
several household members are modeled beforehand in the model stream). 
ƒ Model for non-home-based sub-tours at work.

# Stop Models {#StopModels}


If a person chooses to make an individual non-mandatory tour, the individual non-mandatory tour destination, time-
of-day, and mode choice model (DTM) determines where that tour will go (the destination), when the tour will 
happen (the time-of-day), and how the tour participants will travel during the tour (the mode). 